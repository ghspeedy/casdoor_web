import{dr as y,R as f,dB as R,s as S,m as d,j as g,bN as U,i as $,dz as b,ab as T}from"./index-a4571b31.js";class w extends f.Component{constructor(e){super(e),this.state={classes:e,msg:null}}getResponseType(e){const t=T.serverUrl;if(e==="null")return"login";const o=new URL(e).origin;return t===o?"login":"code"}UNSAFE_componentWillMount(){const e=new URLSearchParams(this.props.location.search),t=e.get("relayState"),o=e.get("samlResponse"),s=atob(t).split("&"),i=s[0],n=s[1]==="null"||s[1]==="undefined"?"app-built-in":s[1],m=s[2],a=s[3],c=this.getResponseType(a),u={type:c,application:n,provider:m,state:n,redirectUri:`${window.location.origin}/callback`,method:"signup",relayState:t,samlResponse:encodeURIComponent(o)};let l;i===null||i===""?l="":l=`?clientId=${i}&responseType=${c}&redirectUri=${a}&scope=read&state=${n}`,R(u,l).then(r=>{if(r.status==="ok"){const p=this.getResponseType(a);if(p==="login")S("success","Logged in successfully"),d("/");else if(p==="code"){const h=r.data;d(`${a}?code=${h}&state=${n}`)}}else this.setState({msg:r.msg})})}render(){return g("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:this.state.msg===null?g(U,{size:"large",tip:$.t("login:Signing in..."),style:{paddingTop:"10%"}}):b(this,this.state.msg)})}}const v=y(w);export{v as default};
