import{aF as P,aG as E,aH as _,ag as b,aJ as H,aw as k,U as z,_ as O,R as N,s as j,i,j as e,c4 as w,c1 as C,e as L,m as S,n as d,v as g,cn as u}from"./index-f0baa7a0.js";const W=r=>{const{componentCls:t,sizePaddingEdgeHorizontal:o,colorSplit:s,lineWidth:n}=r;return{[t]:Object.assign(Object.assign({},_(r)),{borderBlockStart:`${n}px solid ${s}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",margin:`0 ${r.dividerVerticalGutterMargin}px`,verticalAlign:"middle",borderTop:0,borderInlineStart:`${n}px solid ${s}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${r.dividerHorizontalGutterMargin}px 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${r.dividerHorizontalWithTextGutterMargin}px 0`,color:r.colorTextHeading,fontWeight:500,fontSize:r.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${s}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${n}px solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-left`]:{"&::before":{width:"5%"},"&::after":{width:"95%"}},[`&-horizontal${t}-with-text-right`]:{"&::before":{width:"95%"},"&::after":{width:"5%"}},[`${t}-inner-text`]:{display:"inline-block",padding:"0 1em"},"&-dashed":{background:"none",borderColor:s,borderStyle:"dashed",borderWidth:`${n}px 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStart:n,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:r.colorText,fontWeight:"normal",fontSize:r.fontSize},[`&-horizontal${t}-with-text-left${t}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:o}},[`&-horizontal${t}-with-text-right${t}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:o}}})}},F=P("Divider",r=>{const t=E(r,{dividerVerticalGutterMargin:r.marginXS,dividerHorizontalWithTextGutterMargin:r.margin,dividerHorizontalGutterMargin:r.marginLG});return[W(t)]},{sizePaddingEdgeHorizontal:0});var B=globalThis&&globalThis.__rest||function(r,t){var o={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.indexOf(s)<0&&(o[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(o[s[n]]=r[s[n]]);return o};const R=r=>{const{getPrefixCls:t,direction:o}=b.useContext(H),{prefixCls:s,type:n="horizontal",orientation:l="center",orientationMargin:c,className:m,children:h,dashed:f,plain:x}=r,p=B(r,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),a=t("divider",s),[y,U]=F(a),M=l.length>0?`-${l}`:l,v=!!h,I=l==="left"&&c!=null,$=l==="right"&&c!=null,T=k(a,U,`${a}-${n}`,{[`${a}-with-text`]:v,[`${a}-with-text${M}`]:v,[`${a}-dashed`]:!!f,[`${a}-plain`]:!!x,[`${a}-rtl`]:o==="rtl",[`${a}-no-default-orientation-margin-left`]:I,[`${a}-no-default-orientation-margin-right`]:$},m),G=Object.assign(Object.assign({},I&&{marginLeft:c}),$&&{marginRight:c});return y(b.createElement("div",Object.assign({className:T},p,{role:"separator"}),h&&n!=="vertical"&&b.createElement("span",{className:`${a}-inner-text`,style:G},h)))},D=R;function A(){return fetch(`${z}/api/get-system-info`,{method:"GET",credentials:"include",headers:{"Accept-Language":O()}}).then(r=>r.json())}function V(){return fetch(`${z}/api/get-version-info`,{method:"GET",credentials:"include",headers:{"Accept-Language":O()}}).then(r=>r.json())}class X extends N.Component{constructor(t){super(t),this.state={systemInfo:{cpuUsage:[],memoryUsed:0,memoryTotal:0},versionInfo:{},intervalId:null,loading:!0}}UNSAFE_componentWillMount(){A().then(t=>{this.setState({systemInfo:t.data,loading:!1});const o=setInterval(()=>{A().then(s=>{this.setState({systemInfo:s.data})}).catch(s=>{j("error",`System info failed to get: ${s}`)})},1e3*3);this.setState({intervalId:o})}).catch(t=>{j("error",`System info failed to get: ${t}`)}),V().then(t=>{this.setState({versionInfo:t.data})}).catch(t=>{j("error",`Version info failed to get: ${t}`)})}componentWillUnmount(){this.state.intervalId!==null&&clearInterval(this.state.intervalId)}render(){var l,c,m,h,f,x,p;const t=((l=this.state.systemInfo.cpuUsage)==null?void 0:l.length)<=0?i.t("system:Failed to get CPU usage"):this.state.systemInfo.cpuUsage.map((a,y)=>e.jsx(w,{percent:Number(a.toFixed(1))},y)),o=this.state.systemInfo.memoryUsed&&this.state.systemInfo.memoryTotal&&this.state.systemInfo.memoryTotal<=0?i.t("system:Failed to get memory usage"):e.jsxs("div",{children:[C(this.state.systemInfo.memoryUsed)," / ",C(this.state.systemInfo.memoryTotal),e.jsx("br",{})," ",e.jsx("br",{}),e.jsx(w,{type:"circle",percent:Number((Number(this.state.systemInfo.memoryUsed)/Number(this.state.systemInfo.memoryTotal)*100).toFixed(2))})]}),s=((c=this.state.versionInfo)==null?void 0:c.version)!==""?`https://github.com/casdoor/casdoor/releases/tag/${(m=this.state.versionInfo)==null?void 0:m.version}`:"";let n=((h=this.state.versionInfo)==null?void 0:h.version)!==""?(f=this.state.versionInfo)==null?void 0:f.version:i.t("system:Unknown version");return((x=this.state.versionInfo)==null?void 0:x.commitOffset)>0&&(n+=` (ahead+${(p=this.state.versionInfo)==null?void 0:p.commitOffset})`),L()?e.jsxs(S,{gutter:[16,0],children:[e.jsx(d,{span:24,children:e.jsx(g,{title:i.t("system:CPU Usage"),bordered:!0,style:{textAlign:"center",width:"100%"},children:this.state.loading?e.jsx(u,{size:"large"}):t})}),e.jsx(d,{span:24,children:e.jsx(g,{title:i.t("system:Memory Usage"),bordered:!0,style:{textAlign:"center",width:"100%"},children:this.state.loading?e.jsx(u,{size:"large"}):o})}),e.jsx(d,{span:24,children:e.jsxs(g,{title:i.t("system:About Casdoor"),bordered:!0,style:{textAlign:"center"},children:[e.jsx("div",{children:i.t("system:An Identity and Access Management (IAM) / Single-Sign-On (SSO) platform with web UI supporting OAuth 2.0, OIDC, SAML and CAS")}),"GitHub: ",e.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/casdoor/casdoor",children:"Casdoor"}),e.jsx("br",{}),i.t("system:Version"),": ",e.jsx("a",{target:"_blank",rel:"noreferrer",href:s,children:n}),e.jsx("br",{}),i.t("system:Official website"),": ",e.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://casdoor.org",children:"https://casdoor.org"}),e.jsx("br",{}),i.t("system:Community"),": ",e.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://casdoor.org/#:~:text=Casdoor%20API-,Community,-GitHub",children:"Get in Touch!"})]})})]}):e.jsxs(S,{children:[e.jsx(d,{span:6}),e.jsxs(d,{span:12,children:[e.jsxs(S,{gutter:[10,10],children:[e.jsx(d,{span:12,children:e.jsx(g,{title:i.t("system:CPU Usage"),bordered:!0,style:{textAlign:"center",height:"100%"},children:this.state.loading?e.jsx(u,{size:"large"}):t})}),e.jsx(d,{span:12,children:e.jsx(g,{title:i.t("system:Memory Usage"),bordered:!0,style:{textAlign:"center",height:"100%"},children:this.state.loading?e.jsx(u,{size:"large"}):o})})]}),e.jsx(D,{}),e.jsxs(g,{title:i.t("system:About Casdoor"),bordered:!0,style:{textAlign:"center"},children:[e.jsx("div",{children:i.t("system:An Identity and Access Management (IAM) / Single-Sign-On (SSO) platform with web UI supporting OAuth 2.0, OIDC, SAML and CAS")}),"GitHub: ",e.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/casdoor/casdoor",children:"Casdoor"}),e.jsx("br",{}),i.t("system:Version"),": ",e.jsx("a",{target:"_blank",rel:"noreferrer",href:s,children:n}),e.jsx("br",{}),i.t("system:Official website"),": ",e.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://casdoor.org",children:"https://casdoor.org"}),e.jsx("br",{}),i.t("system:Community"),": ",e.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://casdoor.org/#:~:text=Casdoor%20API-,Community,-GitHub",children:"Get in Touch!"})]})]}),e.jsx(d,{span:6})]})}}export{X as default};
